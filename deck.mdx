import { Notes, Head, Appear, Image } from "mdx-deck";
import gitHubDependabot from './images/github-dependabot.png'
import gitHubSecurityAlerts from './images/github-security-alerts.png'
import openPRs from './images/open-prs.png'
import prDetail from './images/pr-detail.png'
import lmcLogo from './images/lmc-logo.png'
import { default as customTheme } from "./src/theme";
export const theme = customTheme;

<Head>
  <title>Renovate Your Dependencis â€“ Tomas Litera</title>
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:creator" content="@tomaslitera" />
  <meta
    property="og:image"
    content="http://renovate-your-dependencies.netlify.com/presentation.png"
  />
  <meta
    property="og:title"
    content="Renovate your dependencies â€“ Tomas Litera"
  />
</Head>

<img src={lmcLogo} width="120" />

# Renovate Your Dependencies

_by [Tomas Litera](https://litera.me)_

<Notes>Microphone, screen recording, start timer</Notes>

---

## Motivation

Automagically solve security updates

---

## Do you know them?

[DependaBot](https://dependabot.com/)

[GreenKeeper](https://greenkeeper.io/)

[Snyk](https://snyk.io/)

---

<Image src={gitHubDependabot} size="50%" />

---

<Image src={gitHubSecurityAlerts} size="50%" />

---

## Requirments

- Create separate branches and PRs per dependency
- Solve security updates
- Self - Hosted
- Free ğŸ˜‰

---

## Goal

Every dependency update has its separate branch and pull request

- better testing
- reliable updates: not all patches and minor updates are non-breaking

---

## Security Checks

- Symfony Security Check
- npm | yarn audit
- Java ?

---

## Self - hosted

DependaBot: âœ… separate PRs, âœ… security, â—ï¸ free (GitHub only), âŒ self-hosted

GreenKeeper: âœ… separate PRs, âœ… security, âŒ free, âŒ self-hosted

Snyk: âœ… separate PRs, âœ… security, âŒ free, âŒ self-hosted

---

# ğŸ¤” â“

---

# Renovate

- javascript based
- cli
- self-hosted solution
- composer, npm, yarn, docker, maven, etc...

https://renovate.whitesourcesoftware.com/

Docs: https://docs.renovatebot.com/

GitHub: https://github.com/renovatebot/renovate

---

## Self-hosted

```javascript
{
  platform: 'bitbucket-server',
  endpoint: '<server-url>',
  repositories: [
    '~literat/test-renovate-bot-js',
  ],
  enabledManagers: [
    'npm', 'composer',
  ],
```
---

### Self-Hosted Docs

[Self-Hosted Configuration](https://github.com/renovatebot/renovate/blob/master/docs/usage/self-hosted-configuration.md)

---

## Configuration

[Configuration Options](https://github.com/renovatebot/renovate/blob/master/docs/usage/configuration-options.md)

Docs: https://docs.renovatebot.com/configuration-options

---

### Extending configuration

```json
{
  "extends": [
    "config:php-app"
  ],
}
```

---

### PR limit

```json
{
  "prConcurrentLimit": 10
}
```

---

### Separate branches

```json
{
  "rangeStrategy": "update-lockfile",
}
```

---

### Ignoring Dependencies

```json
{
  "packageRules": [
    {
      "packagePatterns": ["^flow"],
      "enabled": false
    }
  ],
}
```

---

### Branch prefix

```json
{
  "branchPrefix": "dependencies/",
}
```

---

### Commit message prefix

```json
{
  "commitMessagePrefix": "Deps: ",
}
```

---

<Image src={openPRs} size="50%" />

---

<Image src={prDetail} size="50%" />

---

## Presets

https://github.com/renovatebot/presets

[Default presets](https://github.com/renovatebot/presets/blob/dda2282e5a53982daea09489d622eedc174243e2/packages/renovate-config-default/package.json)

[Config presets](https://github.com/renovatebot/presets/blob/dda2282e5a53982daea09489d622eedc174243e2/packages/renovate-config-config/package.json)

---

```json
"js-app": {
  "description": "Default configuration",
  "extends": [
    "config:base",
    ":pinAllExceptPeerDependencies"
  ]
},
```

---

## Problems

ğŸ˜Ÿ ğŸ˜« ğŸ˜­ ğŸ˜¡ ğŸ¤¬ ğŸ¤¯ ğŸ’© ğŸ’¥

---

### PHP Composer Satis

Certificates â“

Authorization â“

---

### Maven and Gradle

â“ Do you know a Java developer â“

---

# Help

https://github.com/renovatebot/config-help

---

# Resume

<ul>
  <Appear>
    <li> âœ… self-hosted solution </li>
    <li> âœ… many package managers </li>
    <li> âœ… sheduled job (Jenkinsfile) </li>
    <li> âœ… automagically created branches and PRs with updated dependencies </li>
    <li> âœ… fewer possible security alerts </li>
    <li> âœ… free </li>
    <li> âœ… âŒ security checks at all </li>
  </Appear>
</ul>

---

# ğŸ‘‹

[renovate-your-dependencies.netlify.com](http://renovate-your-dependencies.netlify.com/)

Created with â¤ï¸ using [mdx-deck](https://mdx-deck.jxnblk.com/)

ğŸ“º https://www.youtube.com/watch?v=j-LGtMDYgIQ by [@robinpokorny](https://robinpokorny.com/)
